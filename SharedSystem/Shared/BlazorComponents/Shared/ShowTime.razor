@using Utilities
@using System.Timers

<span class="badge" style="background-color: #002073">
        <span class="opacity-100">
                @(GetTimeToString()) | @(_date.ToShamsi(3))
        </span>
</span>

@code {
        public Timer Timer { get; set; }

        private DateTime _date = DateTime.Now;

        public ShowTime() : base()
        {
                Timer = new Timer();
        }

        protected override void OnInitialized()
        {
                Timer.Enabled = true;
                Timer.Interval = 1000;
                Timer.Elapsed += (sender, args) => TimerEvent(sender, args);

                Timer.Start();
        }

        void TimerEvent(object? sender, ElapsedEventArgs args)
        {
                _date = DateTime.Now;
                StateHasChanged();
        }

        string GetTimeToString()
        {
                var result =
                        $"{_date.TimeOfDay.Hours.ToString("00")}:{_date.TimeOfDay.Minutes.ToString("00")}:{_date.TimeOfDay.Seconds.ToString("00")}";

                return result;
        }

}