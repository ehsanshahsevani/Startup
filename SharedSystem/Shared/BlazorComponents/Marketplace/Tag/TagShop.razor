@inject ShopService ShopService
@inject RequestResultService RequestResultService

@if (Tags is not null)
{
    <TagViewer Tags="Tags"
               TagsSelected="@(TagsSelected)"
               OnSelectKey="args => OnSelectKey.InvokeAsync(args)"
    />
}

@code {
    public Dictionary<string, string>? Tags { get; set; }

    [Parameter] public Dictionary<string, string>? TagsSelected { get; set; }
    [Parameter] public EventCallback<Dictionary<string, string>> OnSelectKey { get; set; }


    protected override async Task OnInitializedAsync()
    {
        await SetTagsAsync();
    }

    private async Task SetTagsAsync()
    {
        var result = await ShopService.GetTagsAsync();
        RequestResultService.AddResult(result);

        if (result.IsSuccess == true)
        {
            Tags = result.Value;
            StateHasChanged();
        }
    }

}